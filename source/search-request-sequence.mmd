sequenceDiagram
  participant U as User
  participant API as API Orchestrator
  participant IDX as Search Index
  participant R as Redis Hot Cache
  participant N as NoSQL Store

  U->>API: search LON–ALC 7-Sep
  API->>IDX: filter • facet • rank
  IDX-->>API: [flightId-1, flightId-2]

  loop each flightId
    API->>R: GET flightId-x
    alt cache hit (≈25 ms)
      R-->>API: cached fare
    else cache miss (≈250 ms)
      R-->>API: miss
      API->>N: GET flightId-x
      N-->>API: latest fare
      API->>R: SET flightId-x TTL 60 s
    end
  end

  API-->>U: priced list  overall p95 ≈ 40 ms
